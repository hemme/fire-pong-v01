namespace SpriteKind {
    export const StickA = SpriteKind.create()
    export const StickB = SpriteKind.create()
}
sprites.onOverlap(SpriteKind.StickA, SpriteKind.Projectile, function (stick, proj) {
    proj.setVelocity(Math.abs(proj.vx) + stick.vx / 5, (proj.vy + stick.vy) / 2)
})
sprites.onOverlap(SpriteKind.StickB, SpriteKind.Projectile, function (stick, proj) {
    proj.setVelocity(0 - Math.abs(proj.vx) + stick.vx / 5, (proj.vy + stick.vy) / 2)
})
function Init () {
    ball.x = scene.screenWidth() / 2 + offsetX
    ball.y = scene.screenHeight() / 2 + offsetY
    ball.setVelocity(0, 0)
    stick1.x = 22
    stick1.y = scene.screenHeight() / 2 + 4
    stick2.x = 155
    stick2.y = scene.screenHeight() / 2 + 4
    scene.cameraShake(4, 500)
    ball.setVelocity(50 * (Math.random()>0.5 ? 1 : -1), 50 * Math.random())
}
let PuntiPlayer1 = 0
let PuntiPlayer2 = 0
let stick2: Sprite = null
let stick1: Sprite = null
let ball: Sprite = null
let offsetY = 0
let offsetX = 0
offsetX = 8
offsetY = 6
tiles.setTilemap(tilemap`level_0`)
scene.setBackgroundColor(15)
scene.setBackgroundImage(img`
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    ccccccccddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ddddddddd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666ddddddddd
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666ddd6666666666666666666666666666666666666666666666666666666666666666666666666666666
    66666666666666666666666666666666666666666666666666666666666666666666666666666ddddd666666666666666666666666666666666666666666666666666666666666666666666666666666
    66666666666666666666666666666666666666666666666666666666666666666666666666666ddddd666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666ddd6666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666666666666
    ddddddddd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666ddddddddd
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccd6666666666666666666666666666666666666666666666666666666666666666666666d66666666666666666666666666666666666666666666666666666666666666666666666dcccccccc
    ccccccccddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddcccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
    `)
tiles.setWallAt(tiles.getTileLocation(0, 0), true)
ball = sprites.create(img`
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . 1 1 1 1 1 1 . . . . . 
    . . . . . 1 1 1 1 1 1 . . . . . 
    . . . . . 1 1 1 1 1 1 . . . . . 
    . . . . . 1 1 1 1 1 1 . . . . . 
    . . . . . 1 1 1 1 1 1 . . . . . 
    . . . . . 1 1 1 1 1 1 . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    `, SpriteKind.Projectile)
stick1 = sprites.create(img`
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    `, SpriteKind.StickA)
controller.player1.moveSprite(stick1)
stick2 = sprites.create(img`
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    . . . . . . 1 1 1 . . . . . . . 
    `, SpriteKind.StickB)
controller.player2.moveSprite(stick2)
Init()
ball.setFlag(SpriteFlag.BounceOnWall, true)
scene.centerCameraAt(scene.screenWidth() / 2 + offsetX, scene.screenHeight() / 2 - offsetY)
forever(function () {
    if (ball.x < 5) {
        PuntiPlayer2 += 1
        stick2.say(":)", 1000)
        Init()
    }
    if (ball.x > 165) {
        PuntiPlayer1 += 1
        stick1.say(":)", 1000)
        Init()
    }
    info.setScore(PuntiPlayer1 - PuntiPlayer2)
    if (ball.vx * ball.vx + ball.vy * ball.vy > 30000) {
        ball.startEffect(effects.fire)
    }
    if (ball.vx * ball.vx + ball.vy * ball.vy < 30000) {
        effects.clearParticles(ball)
    }
})
